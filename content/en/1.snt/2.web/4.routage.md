---
title: Packet Routing
description: This course explains how packet routing works on the Internet, detailing the role of switches and routers in data forwarding. It highlights the diversity of possible paths and the importance of IP addresses for correctly directing packets.
navigation: false
--- 

Previously, we saw that the internet is a "network of networks". We also saw that data is transferred from one machine to another in the form of data packets. How do these data packets find their way between two computers?

Here is the representation of a "simplified mini internet":

:imago{src="DiagRes.png" :nodark="true"}

We have the following elements on this diagram:

- 15 computers: M1 to M15
- 6 switches: R1 to R6
- 8 routers: A, B, C, D, E, F, G and H

A switch is a kind of "smart power strip" that allows all computers belonging to the same network, which we will call "local" (we will see examples below), to be connected together. To do this, a switch is composed of a more or less important number of female RJ45 sockets (an ethernet cable (often called "network cable") has 2 male RJ45 plugs at its 2 ends).

::imago{src="switch.png" :nodark="true"}
Different switches
::

A router allows several networks to be connected together, it is composed of a more or less important number of network interfaces (network cards). The simplest routers that can be encountered allow two networks to be connected together (they then have 2 network interfaces), but there are routers capable of connecting together about ten networks.

Let's now return to the analysis of our diagram:

We have 6 local networks, each local network has its own switch (in reality, a local network is often composed of several switches if the number of computers belonging to this network becomes important).

### Activity 3.1

::card
---
title: Document to read
---
Computers M1, M2 and M3 belong to local network 1. Computers M4, M5 and M6 belong to local network 2. We can synthesize all this as follows:

- local network 1: M1, M2 and M3
- local network 2: M4, M5 and M6
::

::tip{type="info"}
Complete the list below with local networks 3, 4, 5 and 6.
::

---

### Activity 3.2

::card
---
title: Document to read
---
Here are some examples of communications between 2 computers:

**case #1: M1 wants to communicate with M3**

The packet is sent from M1 to switch R1, R1 "notices" that M3 is indeed in local network 1, so the packet is sent directly to M3. We can summarize the packet's route as:

M1→R1→M3

**case #2: M1 wants to communicate with M6**

The packet is sent from M1 to switch R1, R1 "notices" that M6 is not on local network 1, so R1 sends the packet to router A. Router A is not directly connected to local network R2 (local network of machine M6), but it "knows" that router B is connected to local network 2. Router A sends the packet to router B. Router B is connected to local network 2, it sends the packet to Switch R2. Switch R2 sends the packet to machine M6.

M1 → R1→ Router A → Router B → R2 → M6

**case #3: M1 wants to communicate with M9**

M1 → R1 → Router A → Router B → Router D → Router E → R4 → M9

Let's stay on this case #3: as you may have noticed, the path given above is not the only possibility, indeed we could also have had:

M1 → R1 → Router A → Router H → Router F → Router E → R4 → M9

It is very important to understand that there are often several possible paths to connect 2 computers:

**case #4: M13 wants to communicate with M9**

We can have: M13 → R6 → Router G → Router F → Router E → R4 → M9

or again: M13 → R6 → Router G → Router F → Router H → Router C → Router D → Router E → R4 → M9

One might think that the "Router F → Router E" path is faster and therefore preferable to the "Router F → Router H" path, this is probably true, but imagine that there is a technical problem between Router F and Router E, the existence of the "Router F → Router H" path will still allow establishing communication between M13 and M9. Sometimes, we hear certain politicians or journalists mention "cutting off the internet", perhaps you will now better understand that this makes no sense, because even if some authority decided to cut part of the infrastructure, packets could pass through another path.
::

::tip
Determine a possible path to establish a connection between machine M4 and M14.
::

---

### Activity 3.3

::card
---
title: Document to read
---
One can ask the question: how do switches or routers proceed to bring packets to the right destination. Without going into details, as this exceeds our objective, you must still know that they use the IP addresses of computers.

We have seen that an IP address was of the form a.b.c.d (example: 192.168.1.5). Part of the IP address allows identifying the network to which the machine belongs and the other part of the IP address allows identifying the machine on this network.

Example: Let a computer M4 having IP address 192.168.2.1 In this IP address "192.168.2" allows identifying the network (we say that machine M4 belongs to the network with address 192.168.2.0) and "1" allows identifying the machine on the network (more precisely on network 192.168.2.0). M4, M5 and M6 are on the same network, so M5's IP address must start with "192.168.2" (possible IP address for M5: 192.168.2.2). On the other hand M7 is not on the same network as M4, M5 and M6, the network part of its IP address cannot be "192.168.2" (possible IP for M7: 192.168.3.1).

By analyzing the network part of the IP addresses of machines wishing to communicate, switches and routers are able to route a packet in the right direction. Let's imagine that switch R2 receives a packet that is destined for computer M7 (IP address of M7: 192.168.3.1). R2 "notices" that M7 is not on the same network as it (R2 belongs to network with address 192.168.2.0 while M7 belongs to network with address 192.168.3.0), so it sends the packet to router B...
::

::tip
Starting from the examples below, give a possible IP address for the following computers: M1 (starting from the principle that M2's address is 192.168.1.3), M6 (starting from the principle that M4's address is 192.168.2.1) and M8 (starting from the principle that M7's address is 192.168.3.1).
::

---

### Activity 3.4

::card
---
title: Document to read
---
**Warning**, IP addresses (a.b.c.d) do not necessarily have parts a, b and c dedicated to network identification and part d dedicated to machine identification on the network: we often add to the IP address a "/" followed by the number 8, 16 or 24

- if this number is 8 (example: 192.168.2.1/8), this means that for an address a.b.c.d/8, part a is dedicated to the network address, the rest (b, c, d) is dedicated to the machine part of the IP address. We will therefore have a network address of the form a.0.0.0
- if this number is 16 (example: 192.168.2.1/16), this means that for an address a.b.c.d/16, parts a and b are dedicated to the network address, the rest (c, d) is dedicated to the machine part of the IP address. We will therefore have a network address of the form a.b.0.0
- if this number is 24 (example: 192.168.2.1/24), this means that for an address a.b.c.d/24, parts a, b and c are dedicated to the network address, the rest (d) is dedicated to the machine part of the IP address. We will therefore have a network address of the form a.b.c.0
::

::tip
Let computer A with IP address 172.15.22.3/16 and computer B with IP address 172.16.22.4/16. Are computers A and B on the same local network? Justify your answer
::

---

### Activity 3.5

::card
---
title: Document to read
---
It is possible to have other than /8, /16 or /24 (we can for example find /10 or /17...), but these cases involve the notion of subnet mask which is not in the SNT curriculum.

Very important thing to always keep in mind, even a simple photo is not "transported" all at once from computer A to computer B. The data corresponding to the photo is "cut" into several pieces, each piece being transported via an IP packet. The IP packets transporting the "photo pieces" do not all take the same "path" to go from computer A to computer B. For example, to go from computer M14 to M7, some packets will pass through routers G, F, H and C while other packets will take the path G, F, E, D and C. Once all packets have arrived at destination, the original image can be reconstructed. If a packet gets "lost" on the way, after a while, it can be resent by the sending machine (see the TCP protocol), why not by taking another "path".
::

::tip
A and B are 2 computers located on the same local network. Knowing that A's IP address is 5.3.2.1/8, give a possible IP address for B
::